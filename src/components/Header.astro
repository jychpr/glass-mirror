---
import ThemeIcon from './ThemeIcon.astro';

// Get current path to decide where the "Switch" button goes
const pathname = Astro.url.pathname;
const isFun = pathname.includes('/fun') || pathname.includes('/gaming');

// Logic: If on Fun side, go Pro. If on Pro side, go Fun.
const switchTarget = isFun ? '/glass-mirror/' : '/glass-mirror/fun';
const switchLabel = isFun ? "Switch to Pro" : "Switch to Fun"; // For accessibility only
---

<header>
    <div class="header-content">
        <div class="brand">
            <a href="/glass-mirror/" class="logo">jychpr</a>
            <span class="tagline">Hello World!</span>
        </div>

        <div class="controls">
            <ThemeIcon />
            
            <a href={switchTarget} class="switch-btn" aria-label={switchLabel} title="Switch Personality">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M7 10h14l-4-4"/>
                    <path d="M17 14H3l4 4"/>
                </svg>
            </a>
        </div>
    </div>

    <nav>
        {isFun ? (
            /* Fun Links */
            <div class="nav-links">
                <a href="/glass-mirror/fun">Home</a>
                <a href="/glass-mirror/content">Content</a>
                <a href="/glass-mirror/fun-blog">Blog</a>
            </div>
        ) : (
            /* Pro Links */
            <div class="nav-links">
                <a href="/glass-mirror/">Home</a>
                <a href="/glass-mirror/projects">Projects</a>
                <a href="/glass-mirror/posts">Blog</a>
                <a href="/glass-mirror/tils">TILs</a>
                <a href="/glass-mirror/cv">Resume</a>
            </div>
        )}
    </nav>
</header>

<style>
    header {
        margin-bottom: 2rem;
        padding-top: 1rem;
    }

    .header-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1rem;
    }

    /* === REBRANDING STYLES === */
    .brand {
        display: flex;
        flex-direction: column;
        line-height: 1.2;
    }

    .logo {
        font-family: 'Courier New', Courier, monospace; /* The "Hacker" Font */
        font-size: 1.8rem;
        font-weight: 900;
        text-decoration: none;
        color: var(--text-color);
        letter-spacing: -1px;
    }

    .tagline {
        font-family: 'Courier New', Courier, monospace;
        font-size: 0.85rem;
        color: var(--secondary-text); /* Slightly faded */
    }

    /* === CONTROLS === */
    .controls {
        display: flex;
        align-items: center;
        gap: 15px; /* Space between Sun/Moon and the Switch */
    }

    /* The Mystery Switch Button */
    .switch-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        color: var(--text-color);
        transition: background-color 0.2s, transform 0.2s;
        border: 1px solid transparent;
    }

    .switch-btn:hover {
        background-color: var(--secondary-text-bg); /* Subtle highlight */
        transform: rotate(180deg); /* Fun interaction: It spins when you hover! */
        border: 1px solid var(--border-color);
    }

    /* === NAV LINKS === */
    .nav-links {
        display: flex;
        gap: 1.5rem;
        flex-wrap: wrap;
    }

    .nav-links a {
        text-decoration: none;
        color: var(--text-color);
        font-size: 1rem;
        font-weight: 500;
        border-bottom: 2px solid transparent;
        transition: border-color 0.2s;
    }

    .nav-links a:hover {
        border-bottom: 2px solid var(--text-color);
    }

    /* Mobile tweak */
    @media (max-width: 500px) {
        .logo { font-size: 1.5rem; }
        .nav-links { gap: 1rem; font-size: 0.9rem; }
    }
</style>